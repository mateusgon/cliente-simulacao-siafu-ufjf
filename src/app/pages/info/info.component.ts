import { Component, OnInit } from "@angular/core";
import { SimulationService } from 'src/app/_services/simulation.service';
import { Simulation } from 'src/app/models/simulation';
import { NgbCarouselConfig } from '@ng-bootstrap/ng-bootstrap';
import { Router } from '@angular/router';

@Component({
  selector: "app-info",
  templateUrl: "info.component.html"
})
export class InfoComponent implements OnInit {
  public description: string;
  public simulation: Simulation = new Simulation();

  constructor(private simulationService: SimulationService, config: NgbCarouselConfig, private router: Router) {
    config.interval = 10000;  
    config.wrap = true;  
    config.keyboard = false;  
    config.pauseOnHover = true; 
  }

  ngOnInit() {
    if (this.simulationService.getIdSelected())
    {
      this.simulationService.findSelected(this.simulationService.getIdSelected()).subscribe((data: Simulation) => {
        this.simulation = data;
        this.simulation.description = '<p>As simula&ccedil;&otilde;es foram geradas a partir de par&acirc;metros da epidemia retirados da literatura cient&iacute;fica, ou por estimativas feitas com os dados de Juiz de Fora. Muitos desses par&acirc;metros ser&atilde;o fixos, e outros ser&atilde;o mudados para que possamos principalmente avaliar como medidas de interven&ccedil;&atilde;o n&atilde;o farmacol&oacute;gicas podem afetar o curso de uma epidemia. Procurou-se caracterizar estas interven&ccedil;&otilde;es pela redu&ccedil;&atilde;o no contingente de pessoas que circulariam, e consequentemente o Rt esperado.</p><p>O cen&aacute;rio utilizado &eacute; o campus da UFJF, simulando o que poderia ocorrer, respeitando fluxo de pessoas nos per&iacute;odos de um dia, locais de maior aglomera&ccedil;&atilde;o e circula&ccedil;&atilde;o de pessoas externas, de passagem pelo campus. As interven&ccedil;&otilde;es, nos cen&aacute;rios em que ocorrem, acontecem sempre no 10&ordm; dia, de um total de 50 dias de simula&ccedil;&atilde;o.</p><p>S&atilde;o par&acirc;metros fixos:</p><ul>    <li>&nbsp;Tempo que uma pessoa permanece infectada: 14 dias (recomenda&ccedil;&atilde;o da OMS para quarentena de infectados)</li>    <li>Tempo m&eacute;dio para uma pessoa infectada passar a infectar outras: 2 dias (Li et al. 2020 ; Linton et al. 2020; Lauer et al. 2020; Bi et al. 2020; Sanche et al. 2020)</li>    <li>Percentual de assintom&aacute;ticos: 85% (Z. Wu and McGoogan 2020; J. Liu et al. 2020)</li>    <li>Percentual de pacientes confirmados que necessitar&atilde;o de leito de enfermaria: 8% (baseado em dados de Juiz de Fora at&eacute; final de Abril de 2020)</li>    <li>Percentual de pacientes confirmados que necessitar&atilde;o de leito de UTI: 5% (baseado em dados de Juiz de Fora at&eacute; final de Abril de 2020)</li></ul><p><strong>Cen&aacute;rio sem restri&ccedil;&atilde;o:</strong> Neste cen&aacute;rio, o fluxo de pessoas no campus &eacute; o normal, sem qualquer restri&ccedil;&atilde;o. O Rt esperado para esta situa&ccedil;&atilde;o &eacute; de cerca de 3</p><p><strong>Isolamento flex&iacute;vel:</strong> Seria o cen&aacute;rio de termos apenas medidas de distanciamento social, e a suspens&atilde;o de apenas algumas atividades presenciais, reduzindo o fluxo de pessoas em cerca de 30% e gerando um Rt de cerca de 2,6.</p><p><strong>Isolamento moderado:</strong> A suspens&atilde;o das atividades &eacute; maior, reduzindo o fluxo de pessoas a 50% do normal. O Rt esperado &eacute; de 1,9.</p><p><strong>Isolamento r&iacute;gido:</strong> Todas as atividades presenciais s&atilde;o suspensas, permanecendo apenas as essenciais. A redu&ccedil;&atilde;o &eacute; de 70% da popula&ccedil;&atilde;o total, gerando um Rt esperado de 0.9, menor que 1.</p><p><strong>Refer&ecirc;ncias</strong></p><p>Bi, Qifang, Yongsheng Wu, Shujiang Mei, Chenfei Ye, Xuan Zou, Zhen Zhang, Xiaojian Liu, et al. 2020. &ldquo;Epidemiology and Transmission of COVID-19 in Shenzhen China: Analysis of 391 Cases and 1,286 of Their Close Contacts.&rdquo; medRxiv, March, 2020.03.03.20028423. <a href="https://doi.org/10.1101/2020.03.03.20028423">https://doi.org/10.1101/2020.03.03.20028423.</a></p><p>Lauer, Stephen A., Kyra H. Grantz, Qifang Bi, Forrest K. Jones, Qulu Zheng, Hannah Meredith, Andrew S. Azman, Nicholas G. Reich, and Justin Lessler. 2020. &ldquo;The Incubation Period of 2019-nCoV from Publicly Reported Confirmed Cases: Estimation and Application.&rdquo; medRxiv, February, 2020.02.02.20020016. <a href="https://doi.org/10.1101/2020.02.02.20020016">https://doi.org/10.1101/2020.02.02.20020016</a>.</p><p>Li, Qun, Xuhua Guan, Peng Wu, Xiaoye Wang, Lei Zhou, Yeqing Tong, Ruiqi Ren, et al. 2020. &ldquo;Early Transmission Dynamics in Wuhan, China, of Novel Coronavirus-Infected Pneumonia.&rdquo; New England Journal of Medicine 0 (0):null. <a href="https://doi.org/10.1056/NEJMoa2001316">https://doi.org/10.1056/NEJMoa2001316</a>.</p><p>Linton, Natalie M., Tetsuro Kobayashi, Yichi Yang, Katsuma Hayashi, Andrei R. Akhmetzhanov, Sung-mok Jung, Baoyin Yuan, Ryo Kinoshita, and Hiroshi Nishiura. 2020. &ldquo;Incubation Period and Other Epidemiological Characteristics of 2019 Novel Coronavirus Infections with Right Truncation: A Statistical Analysis of Publicly Available Case Data.&rdquo; Journal of Clinical Medicine 9 (2): 538. <a href="https://doi.org/10.3390/jcm9020538">https://doi.org/10.3390/jcm9020538</a>.</p><p>Liu, Jingyuan, Yao Liu, Pan Xiang, Lin Pu, Haofeng Xiong, Chuansheng Li, Ming Zhang, et al. 2020. &ldquo;Neutrophil-to-Lymphocyte Ratio Predicts Severe Illness Patients with 2019 Novel Coronavirus in the Early Stage.&rdquo; medRxiv, February, 2020.02.10.20021584. <a href="https://doi.org/10.1101/2020.02.10.20021584">https://doi.org/10.1101/2020.02.10.20021584</a>.</p><p>Sanche, Steven, Yen Ting Lin, Chonggang Xu, Ethan Romero-Severson, Nick Hengartner, and Ruian Ke. 2020. &ldquo;The Novel Coronavirus, 2019-nCoV, Is Highly Contagious and More Infectious Than Initially Estimated.&rdquo; medRxiv, February, 2020.02.07.20021154. <a href="https://doi.org/10.1101/2020.02.07.20021154">https://doi.org/10.1101/2020.02.07.20021154</a>.</p><p>Wu, Zunyou, and Jennifer M. McGoogan. 2020. &ldquo;Characteristics of and Important Lessons from the Coronavirus Disease 2019 (COVID-19) Outbreak in China: Summary of a Report of 72 314 Cases from the Chinese Center for Disease Control and Prevention.&rdquo; JAMA, February. <a href="https://doi.org/10.1001/jama.2020.2648">https://doi.org/10.1001/jama.2020.2648</a>.</p> <p>Este trabalho contou com o apoio da Rede Integrada de Pesquisa em Alta Velocidade (RePesq) da UFJF. <a href="https://repesq.ufjf.br/"> https://repesq.ufjf.br/ </a> </p>'
        this.simulationService.setSimulationSelected(this.simulation);
        this.description = this.simulation.description != null ? this.simulation.description : "  O Lorem Ipsum é um texto modelo da indústria tipográfica e de impressão. O Lorem Ipsum tem vindo a ser o texto padrão usado por estas indústrias desde o ano de 1500, quando uma misturou os caracteres de um texto para criar um espécime de livro. Este texto não só sobreviveu 5 séculos, mas também o salto para a tipografia electrónica, mantendo-se essencialmente inalterada. Foi popularizada nos anos 60 com a disponibilização das folhas de Letraset, que continham passagens com Lorem Ipsum, e mais recentemente com os programas de publicação como o Aldus PageMaker que incluem versões do Lorem Ipsum.";
      });  
    }
    else
    {
      this.router.navigate(['/']);
    }
  }
}
